<mat-nav-list>
    <div *ngFor="let item of sidenavItems; let i = index">
        <mat-list-item class="marker-list-item-button-{{item.selector}}"
                        [class.selected-list-item]="isActive(item)"
                        (click)="select(i)">
            <div *ngIf="item.children !== undefined">
                <fa-icon *ngIf="!isToggled(i); else angleDown" [icon]="faAngleRight" class="marker-angle-right"></fa-icon>
                <ng-template #angleDown>
                    <fa-icon [icon]="faAngleDown" class="marker-angle-down"></fa-icon>
                </ng-template>
            </div>        
            <span fxFlex="0 0 auto" class="marker-list-item">
                <fa-icon *ngIf="item.icon" [icon]="item.icon" [ngClass]="{ 'pl-2': item.children && item.icon }"></fa-icon>
                <span class="pl-2 marker-list-item-text">{{item.text}}</span>
            </span>
        </mat-list-item>
        <div *ngIf="isToggled(i)">
            <div *ngFor="let child of item.children; let iChild = index">
                <mat-list-item class="marker-list-item-button-{{child.selector}}"
                               [class.selected-list-item]="isActive(child)"
                               (click)="selectChild(i, iChild)">
                    <div *ngIf="child.children !== undefined" class="pl-4">
                        <fa-icon *ngIf="!isChildToggled(i, iChild); else childAngleDown" [icon]="faAngleRight" class="marker-angle-right"></fa-icon>
                        <ng-template #childAngleDown>
                            <fa-icon [icon]="faAngleDown" class="marker-angle-down"></fa-icon>
                        </ng-template>
                    </div>        
                    <span fxFlex="0 0 auto" class="pl-2 marker-list-item">
                        <fa-icon *ngIf="item.icon" [icon]="item.icon" [ngClass]="{ 'pl-2': item.children && item.icon }"></fa-icon>
                        <span class="marker-list-item-text">{{child.text}}</span>
                    </span>
                </mat-list-item>
                <div *ngIf="isChildToggled(i, iChild)">
                    <div *ngFor="let grandChild of child.children; let iGChild = index">
                        <mat-list-item class="marker-list-item-button-{{grandChild.selector}}"
                            [class.selected-list-item]="isActive(grandChild, child)"
                            (click)="selectGrandChild(i, iChild, iGChild)">
                            <span fxFlex="0 0 auto" class="marker-list-item pl-5">
                                <span class="marker-list-item-text">{{grandChild.text}}</span>
                            </span>
                        </mat-list-item>
                    </div>
                </div>
            </div>
        </div>
    </div>
<!--
    <mat-list-item *ngFor="let item of sidenavItems"
        class="marker-list-item-button-{{item.text}}"
        [class.selected-list-item]="isActive(item)"
        (click)="select(item)">
            <span fxFlex="0 0 auto">
                <fa-icon *ngIf="item.icon" [icon]="item.icon"></fa-icon>
                <span class="marker-list-item-text">{{item.text}}</span>
            </span>
    </mat-list-item>
-->
</mat-nav-list>
